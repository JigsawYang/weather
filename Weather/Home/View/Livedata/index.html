<extend name="Public:base" />
<!-- header slider -->
<block name="content">
        <!-- END header -->
        <!-- content-->
        <!-- title -->
        <div class="wrap wrap_white">
            <div class="container title">
                <h1 class="title__h1 underscore">实况数据</h1>
            </div>
        </div>

        <!-- END title -->
        <div class="wrap wrap_gray pt20">
            <div class="container">
                <div class="row">
                    <div>
                        <form action="/livedata/getdata" class="form-inline" id="wtform" method="post">
                            <div class="form-group pick">
                                <label for="dtp_input2" class="col-md-1 control-label">日期</label>

                                <div class="input-group date form_date col-md-8" data-date="" data-date-format="yyyy-mm-dd"
                                     data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" value="{$day}" readonly>
                                                    <span class="input-group-addon">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </span>
                                </div>
                                <input type="hidden" id="dtp_input2" value="{$day}" name="sdate"/>
                                <br/>
                            </div>
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="设施编号" aria-describedby="basic-addon1" name="station">
                            </div>
                            <!--<div class="form-group slwidth">-->
                                <!--<select class="form-control" name="station">-->
                                    <!--<?php foreach ($stlist as $key => $v) { ?>-->
                                    <!--<option value="{$v['id']}">{$v['location']}--{$v['zdmc']}</option>-->
                                    <!--<?php } ?>-->
                                <!--</select>-->
                            <!--</div>-->
                            <a href="/livedata/show_table" class="btn btn-orange btn-m pull-right" id="tb-btn">表格</a>
                            <button id="btnsub" type="submit" class="btn btn-primary btn-orange pull-right">刷新</button>
                        </form>
                    </div>
                    <div class="wrap-thumbnail">
                        <div class="thumbnail">
                            <div class="thumbnail__news news" style="height: 450px;">
                                <p class="news__category underscore">温度</p>
                                <div class="col-md-12 col-sm-12 tpblock" id="tempreture" style="height:370px">

                                </div>
                            </div>
                        </div>

                        <div class="thumbnail">
                            <div class="thumbnail__news news" style="height: 450px;">
                                <p class="news__category underscore">空气湿度</p>
                                <div class="col-md-12 col-sm-12 tpblock" id="air" style="height:370px">

                                </div>
                            </div>
                        </div>

                        <div class="thumbnail">
                            <div class="thumbnail__news news" style="height: 450px;">
                                <p class="news__category underscore">土壤温度</p>
                                <div class="col-md-12 col-sm-12 tpblock" id="land" style="height:370px">

                                </div>
                            </div>
                        </div>

                        <div class="thumbnail">
                            <div class="thumbnail__news news" style="height: 450px;">
                                <p class="news__category underscore">土壤湿度</p>
                                <div class="col-md-12 col-sm-12 tpblock" id="ldwt" style="height:370px">

                                </div>
                            </div>
                        </div>

                        <div class="thumbnail">
                            <div class="thumbnail__news news" style="height: 450px;">
                                <p class="news__category underscore">太阳辐射</p>
                                <div class="col-md-12 col-sm-12 tpblock" id="sun" style="height:370px">

                                </div>
                            </div>
                        </div>

                        <div class="thumbnail">
                            <div class="thumbnail__news news" style="height: 450px;">
                                <p class="news__category underscore">二氧化碳浓度</p>
                                <div class="col-md-12 col-sm-12 tpblock" id="co2" style="height:370px">

                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <!-- END content-->
    </div>
</block>
<block name="js">
    <script type="text/javascript">
        require.config({
            paths: {
                echarts: "__ASSETS__/js"
            }
        });
    </script>
    <script type="text/javascript" id="linejs">
        require(
                [
                    'echarts',
                    'echarts/chart/line',// 使用柱状图就加载bar模块，按需加载
                    'echarts/chart/bar'
//                    'echarts/chart/radar'
//                    'echarts/chart/polar'
                ],
                function (ec) {
                    var tmp = {$tmp};
//                    console.log(linenumw);
                    if (tmp.length != 0) {
                        var dom_tmp = ec.init(document.getElementById('tempreture'));
                        var tmptime = [];
                        var linenum1 = [];
                        var linenum2 = [];
//                        var lineout = linenumw;

                        for (var val in tmp) {
                            tmptime.push(tmp[val]['time']);
                            linenum1.push(parseInt(tmp[val]['ta_cu']) / 10);
                            linenum2.push(parseInt(tmp[val]['ta_cd']) / 10);
                        }
//                        console.log(linenum1);
                        tmp_op = {
                            title: {
                                textStyle: {
                                    fontSize: 14,
                                    fontWeight: 'bolder',
                                    color: '#333'          // 主标题文字颜色
                                },
                                x: 'left',
                                text: '{$sdate}温度',
                                subtext: '实时数据'
                            },
                            tooltip: {
                                trigger: 'axis'
                            },
                            legend: {
                                orient: 'vertical',
                                x:'right',
                                data:['150cm气温','100cm气温']
                            },

                            toolbox: {
                                show: true,
                                feature: {
//                                    mark: {show: true}
//                                    dataView: {show: true, readOnly: false},
//                                    magicType: {show: true, type: ['line', 'bar']},
//                                    restore: {show: true},
//                                    saveAsImage: {show: true}
                                }
                            },
                            calculable: false,
                            xAxis: [
                                {
                                    type: 'category',
                                    boundaryGap: false,
                                    data: tmptime
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    axisLabel: {
                                        formatter: '{value} °C'
                                    }
                                }
                            ],
                            series: [
                                {
                                    name: '150cm气温',
                                    type: 'line',
                                    data: linenum1,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '平均值'}
                                        ]
                                    }
                                },
                                {
                                    name: '100cm气温',
                                    type: 'line',
                                    data: linenum2,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '平均值'}
                                        ]
                                    }
                                }

                            ]
                        };
                        dom_tmp.setOption(tmp_op);
                    } else {
                        $('#tempreture').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }

                    //空气
                    var air = {$air};
                    if (air.length != 0) {
                        var dom_air = ec.init(document.getElementById('air'));
                        var airtime = [];
                        var airnum = [];
                        for (var val in air) {
                            airtime.push(air[val]['time']);
                            airnum.push(parseInt(air[val]['rh_c']));
                        }
                        air_op = {
                            title: {
                                textStyle: {
                                    fontSize: 14,
                                    fontWeight: 'bolder',
                                    color: '#333'          // 主标题文字颜色
                                },
                                x: 'left',
                                text: '{$sdate}空气湿度',
                                subtext: '实时数据'
                            },
                            tooltip: {
                                trigger: 'axis'
                            },
                            legend: {
                                orient: 'vertical',
                                x:'right',
                                data:['空气湿度']
                            },
                            toolbox: {
                                show: true,
                                feature: {
//                                    mark: {show: true},
//                                    dataView: {show: true, readOnly: false},
//                                    magicType: {show: true, type: ['line', 'bar']},
//                                    restore: {show: true},
//                                    saveAsImage: {show: true}
                                }
                            },
                            calculable: false,
                            xAxis: [
                                {
                                    type: 'category',
                                    boundaryGap: false,
                                    data: airtime
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    axisLabel: {
                                        formatter: '{value}'
                                    }
                                }
                            ],
                            series: [
                                {
                                    name: '空气湿度',
                                    type: 'line',
                                    data: airnum,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    }
//                                    markLine: {
//                                        data: [
//                                            {type: 'average', name: '平均值'}
//                                        ]
//                                    }
                                }

                            ]
                        };
                        dom_air.setOption(air_op);
                    } else {
                        $('#air').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }

                    //土地
                    var land = {$land};
                    if (land.length != 0) {
                        var dom_land = ec.init(document.getElementById('land'));
                        var landtime = [];
                        var landnum1 = [];
                        var landnum2 = [];
                        var landnum3 = [];

                        for (var val in land) {
                            landtime.push(land[val]['time']);
                            landnum1.push(parseInt(land[val]['ts_u']) / 10);
                            landnum2.push(parseInt(land[val]['ts_m']) / 10);
                            landnum3.push(parseInt(land[val]['ts_d']) / 10);
                        }

                        land_op = {
                            title: {
                                textStyle: {
                                    fontSize: 14,
                                    fontWeight: 'bolder',
                                    color: '#333'          // 主标题文字颜色
                                },
                                x: 'left',
                                text: '{$sdate}土壤温度',
                                subtext: '实时数据'
                            },
                            tooltip: {
                                trigger: 'axis'
                            },
                            legend: {
                                orient: 'vertical',
                                x:'right',
                                data:['0cm温度','-10cm温度','-20cm温度']
                            },
                            toolbox: {
                                show: true,
                                feature: {
//                                    mark: {show: true},
//                                    dataView: {show: true, readOnly: false},
//                                    magicType: {show: true, type: ['line', 'bar']},
//                                    restore: {show: true},
//                                    saveAsImage: {show: true}
                                }
                            },
                            calculable: false,
                            xAxis: [
                                {
                                    type: 'category',
                                    boundaryGap: false,
                                    data: landtime
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    axisLabel: {
                                        formatter: '{value} °C'
                                    }
                                }
                            ],
                            series: [
                                {
                                    name: '0cm温度',
                                    type: 'line',
                                    data: landnum1,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '平均值'}
                                        ]
                                    }
                                },
                                {
                                    name: '-10cm温度',
                                    type: 'line',
                                    data: landnum2,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '平均值'}
                                        ]
                                    }
                                },
                                {
                                    name: '-20cm温度',
                                    type: 'line',
                                    data: landnum3,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '平均值'}
                                        ]
                                    }
                                }
                            ]
                        };
                        dom_land.setOption(land_op);
                    } else {
                        $('#land').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }

                    //土壤湿度
                    var ldwt = {$ldwt};
                    if (ldwt.length != 0) {
                        var dom_ldwt = ec.init(document.getElementById('ldwt'));
                        var ldwttime = [];
                        var ldwtnum1 = [];
                        var ldwtnum2 = [];
                        var ldwtnum3 = [];

                        for (var val in ldwt) {
                            ldwttime.push(ldwt[val]['time']);
                            ldwtnum1.push(parseInt(ldwt[val]['sh_u']));
                            ldwtnum2.push(parseInt(ldwt[val]['sh_m']));
                            ldwtnum3.push(parseInt(ldwt[val]['sh_d']));
                        }

                        ldwt_op = {
                            title: {
                                textStyle: {
                                    fontSize: 14,
                                    fontWeight: 'bolder',
                                    color: '#333'          // 主标题文字颜色
                                },
                                x: 'left',

                                text: '{$sdate}土壤湿度',
                                subtext: '实时数据'
                            },
                            tooltip: {
                                trigger: 'axis'
                            },
                            legend: {
                                orient: 'vertical',
                                x:'right',
                                data:['0cm湿度','-10cm湿度','-20cm湿度']
                            },
                            toolbox: {
                                show: true,
                                feature: {
//                                    mark: {show: true},
//                                    dataView: {show: true, readOnly: false},
//                                    magicType: {show: true, type: ['line', 'bar']},
//                                    restore: {show: true},
//                                    saveAsImage: {show: true}
                                }
                            },
                            calculable: false,
                            xAxis: [
                                {
                                    type: 'category',
                                    boundaryGap: false,
                                    data: ldwttime
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    axisLabel: {
                                        formatter: '{value}'
                                    }
                                }
                            ],
                            series: [
                                {
                                    name: '0cm湿度',
                                    type: 'line',
                                    data: ldwtnum1,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    }
//                                    markLine: {
//                                        data: [
//                                            {type: 'average', name: '平均值'}
//                                        ]
//                                    }
                                },
                                {
                                    name: '-10cm湿度',
                                    type: 'line',
                                    data: ldwtnum2,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    }
//                                    markLine: {
//                                        data: [
//                                            {type: 'average', name: '平均值'}
//                                        ]
//                                    }
                                },
                                {
                                    name: '-20cm湿度',
                                    type: 'line',
                                    data: ldwtnum3,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    }
//                                    markLine: {
//                                        data: [
//                                            {type: 'average', name: '平均值'}
//                                        ]
//                                    }
                                }
                            ]
                        };
                        dom_ldwt.setOption(ldwt_op);
                    } else {
                        $('#ldwt').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }

                    //辐射
                    var sun = {$sun};
                    if (sun.length != 0) {
                        var dom_sun = ec.init(document.getElementById('sun'));
                        var suntime = [];
                        var sunnum1 = [];
                        var sunnum2 = [];

                        for (var val in sun) {
                            suntime.push(sun[val]['time']);
                            sunnum1.push(parseInt(sun[val]['r_u']));
                            sunnum2.push(parseInt(sun[val]['par_u']));
                        }

                        sun_op = {
                            title: {
                                textStyle: {
                                    fontSize: 14,
                                    fontWeight: 'bolder',
                                    color: '#333'          // 主标题文字颜色
                                },
                                x: 'left',

                                text: '{$sdate}太阳辐射',
                                subtext: '实时数据'
                            },
                            tooltip: {
                                trigger: 'axis'
                            },
                            legend: {
                                orient: 'vertical',
                                x:'right',
                                data:['150cm辐射', '有效辐射']
                            },
                            toolbox: {
                                show: true,
                                feature: {
//                                    mark: {show: true},
//                                    dataView: {show: true, readOnly: false},
//                                    magicType: {show: true, type: ['line', 'bar']},
//                                    restore: {show: true},
//                                    saveAsImage: {show: true}
                                }
                            },
                            calculable: false,
                            xAxis: [
                                {
                                    type: 'category',
                                    boundaryGap: false,
                                    data: suntime
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    axisLabel: {
                                        formatter: '{value}'
                                    }
                                }
                            ],
                            series: [
                                {
                                    name: '150cm辐射',
                                    type: 'line',
                                    data: sunnum1,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '平均值'}
                                        ]
                                    }
                                },
                                {
                                    name: '有效辐射',
                                    type: 'line',
                                    data: sunnum2,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '平均值'}
                                        ]
                                    }
                                }
                            ]
                        };
                        dom_sun.setOption(sun_op);
                    } else {
                        $('#sun').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }

                    //CO2
                    var co2 = {$co2};
                    if (co2.length != 0) {
                        var dom_co2 = ec.init(document.getElementById('co2'));
                        var co2time = [];
                        var co2num = [];
                        for (var val in co2) {
                            co2time.push(co2[val]['time']);
                            co2num.push(parseInt(co2[val]['co2_u']));
                        }
                        co2_op = {
                            title: {
                                textStyle: {
                                    fontSize: 14,
                                    fontWeight: 'bolder',
                                    color: '#333'          // 主标题文字颜色
                                },
                                x: 'left',

                                text: '{$sdate}二氧化碳浓度',
                                subtext: '实时数据'
                            },
                            tooltip: {
                                trigger: 'axis'
                            },
                            legend: {
                                orient: 'vertical',
                                x:'right',
                                data:['co2浓度']
                            },
                            toolbox: {
                                show: true,
                                feature: {
//                                    mark: {show: true},
//                                    dataView: {show: true, readOnly: false},
//                                    magicType: {show: true, type: ['line', 'bar']},
//                                    restore: {show: true},
//                                    saveAsImage: {show: true}
                                }
                            },
                            calculable: false,
                            xAxis: [
                                {
                                    type: 'category',
                                    boundaryGap: false,
                                    data: co2time
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    axisLabel: {
                                        formatter: '{value}'
                                    }
                                }
                            ],
                            series: [
                                {
                                    name: 'co2浓度',
                                    type: 'line',
                                    data: co2num,
                                    markPoint: {
                                        data: [
                                            {type: 'max', name: '最大值'},
                                            {type: 'min', name: '最小值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '平均值'}
                                        ]
                                    }
                                }

                            ]
                        };
                        dom_co2.setOption(co2_op);
                    } else {
                        $('#co2').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }
                }
        )
    </script>

    <script type="text/javascript">
        var form = $('#wtform');
        form.Validform({
            btnSubmit: "#btnsub",
            ajaxPost: true,
            callback: function (data) {
                if (data.status) {
                    if (data.info) {
                        require(
                                [
                                    'echarts',
                                    'echarts/chart/line',// 使用柱状图就加载bar模块，按需加载
                                    'echarts/chart/bar'
                                ],
                                function (ec) {
                                    // 基于准备好的dom，初始化echarts图表
                                    var dom_tmp = ec.init(document.getElementById('tempreture'));

//                                    var outtmp = data.outtmp;
                                    var tmp = data.info;
                                    var dtime = [];
                                    var linenum1 = [];
                                    var linenum2 = [];
//                                    var lineout = [];
//                                    console.log(tmp);
                                    for (var val in tmp) {
                                        dtime.push(tmp[val]['time']);
                                        linenum1.push(parseInt(tmp[val]['ta_cu']) / 10);
                                        linenum2.push(parseInt(tmp[val]['ta_cd']) / 10);

                                    }
//                                    for (var val1 in outtmp) {
//                                        lineout.push(parseInt(outtmp[val1]['bc']) / 10);
//
//                                    }
                                    tmp_op = {
                                        title: {
                                            textStyle: {
                                                fontSize: 14,
                                                fontWeight: 'bolder',
                                                color: '#333'          // 主标题文字颜色
                                            },
                                            x: 'left',

                                            text: data.sdate + '温度',
                                            subtext: '实时数据'
                                        },
                                        tooltip: {
                                            trigger: 'axis'
                                        },
                                        legend: {
                                            orient: 'vertical',
                                            x:'right',
                                            data:['150cm气温','100cm气温']
                                        },
                                        toolbox: {
                                            show: true,
                                            feature: {
//                                                mark: {show: true},
//                                                dataView: {show: true, readOnly: false},
//                                                magicType: {show: true, type: ['line', 'bar']},
//                                                restore: {show: true},
//                                                saveAsImage: {show: true}
                                            }
                                        },
                                        calculable: false,
                                        xAxis: [
                                            {
                                                type: 'category',
                                                boundaryGap: false,
                                                data: dtime
                                            }
                                        ],
                                        yAxis: [
                                            {
                                                type: 'value',
                                                axisLabel: {
                                                    formatter: '{value} °C'
                                                }
                                            }
                                        ],
                                        series: [
                                            {
                                                name: '150cm气温',
                                                type: 'line',
                                                data: linenum1,
                                                markPoint: {
                                                    data: [
                                                        {type: 'max', name: '最大值'},
                                                        {type: 'min', name: '最小值'}
                                                    ]
                                                },
                                                markLine: {
                                                    data: [
                                                        {type: 'average', name: '平均值'}
                                                    ]
                                                }
                                            },
                                            {
                                                name: '100cm气温',
                                                type: 'line',
                                                data: linenum2,
                                                markPoint: {
                                                    data: [
                                                        {type: 'max', name: '最大值'},
                                                        {type: 'min', name: '最小值'}
                                                    ]
                                                },
                                                markLine: {
                                                    data: [
                                                        {type: 'average', name: '平均值'}
                                                    ]
                                                }
                                            }

                                        ]
                                    };
                                    dom_tmp.setOption(tmp_op);
                                }
                        );
                    } else {
                        $('#tempreture').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');

                    }
                    if (data.air) {
                        require(
                                [
                                    'echarts',
                                    'echarts/chart/line',// 使用柱状图就加载bar模块，按需加载
                                    'echarts/chart/bar'
                                ],
                                function (ec) {
                                    var air = data.air;
                                    if (air.length != 0) {
                                        var dom_air = ec.init(document.getElementById('air'));
                                        var airtime = [];
                                        var airnum = [];
                                        for (var val in air) {
                                            airtime.push(air[val]['time']);
                                            airnum.push(parseInt(air[val]['rh_c']));
                                        }
                                        air_op = {
                                            title: {
                                                textStyle: {
                                                    fontSize: 14,
                                                    fontWeight: 'bolder',
                                                    color: '#333'          // 主标题文字颜色
                                                },
                                                x: 'left',

                                                text: data.sdate + '空气湿度',
                                                subtext: '实时数据'
                                            },
                                            tooltip: {
                                                trigger: 'axis'
                                            },
                                            legend: {
                                                orient: 'vertical',
                                                x:'right',
                                                data:['空气湿度']
                                            },
                                            toolbox: {
                                                show: true,
                                                feature: {
//                                                    mark: {show: true},
//                                                    dataView: {show: true, readOnly: false},
//                                                    magicType: {show: true, type: ['line', 'bar']},
//                                                    restore: {show: true},
//                                                    saveAsImage: {show: true}
                                                }
                                            },
                                            calculable: false,
                                            xAxis: [
                                                {
                                                    type: 'category',
                                                    boundaryGap: false,
                                                    data: airtime
                                                }
                                            ],
                                            yAxis: [
                                                {
                                                    type: 'value',
                                                    axisLabel: {
                                                        formatter: '{value}'
                                                    }
                                                }
                                            ],
                                            series: [
                                                {
                                                    name: '空气湿度',
                                                    type: 'line',
                                                    data: airnum,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    }
//                                                    markLine: {
//                                                        data: [
//                                                            {type: 'average', name: '平均值'}
//                                                        ]
//                                                    }
                                                }

                                            ]
                                        };
                                        dom_air.setOption(air_op);
                                    }
                                }
                        );

                    } else {
                        $('#air').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }
                    if (data.land) {
                        require(
                                [
                                    'echarts',
                                    'echarts/chart/line',// 使用柱状图就加载bar模块，按需加载
                                    'echarts/chart/bar'
                                ],
                                function (ec) {
                                    var land = data.land;
                                    if (land.length != 0) {
                                        var dom_land = ec.init(document.getElementById('land'));
                                        var landtime = [];
                                        var landnum1 = [];
                                        var landnum2 = [];
                                        var landnum3 = [];

                                        for (var val in land) {
                                            landtime.push(land[val]['time']);
                                            landnum1.push(parseInt(land[val]['ts_u']) /10);
                                            landnum2.push(parseInt(land[val]['ts_m']) / 10);
                                            landnum3.push(parseInt(land[val]['ts_d']) / 10);
                                        }

                                        land_op = {
                                            title: {
                                                textStyle: {
                                                    fontSize: 14,
                                                    fontWeight: 'bolder',
                                                    color: '#333'          // 主标题文字颜色
                                                },
                                                x: 'left',

                                                text: data.sdate + '土壤温度',
                                                subtext: '实时数据'
                                            },
                                            tooltip: {
                                                trigger: 'axis'
                                            },
                                            legend: {
                                                orient: 'vertical',
                                                x:'right',
                                                data:['0cm温度','-10cm温度','-20cm温度']
                                            },
                                            toolbox: {
                                                show: true,
                                                feature: {
//                                                    mark: {show: true},
//                                                    dataView: {show: true, readOnly: false},
//                                                    magicType: {show: true, type: ['line', 'bar']},
//                                                    restore: {show: true},
//                                                    saveAsImage: {show: true}
                                                }
                                            },
                                            calculable: false,
                                            xAxis: [
                                                {
                                                    type: 'category',
                                                    boundaryGap: false,
                                                    data: landtime
                                                }
                                            ],
                                            yAxis: [
                                                {
                                                    type: 'value',
                                                    axisLabel: {
                                                        formatter: '{value} °C'
                                                    }
                                                }
                                            ],
                                            series: [
                                                {
                                                    name: '0cm温度',
                                                    type: 'line',
                                                    data: landnum1,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    },
                                                    markLine: {
                                                        data: [
                                                            {type: 'average', name: '平均值'}
                                                        ]
                                                    }
                                                },
                                                {
                                                    name: '-10cm温度',
                                                    type: 'line',
                                                    data: landnum2,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    },
                                                    markLine: {
                                                        data: [
                                                            {type: 'average', name: '平均值'}
                                                        ]
                                                    }
                                                },
                                                {
                                                    name: '-20cm温度',
                                                    type: 'line',
                                                    data: landnum3,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    },
                                                    markLine: {
                                                        data: [
                                                            {type: 'average', name: '平均值'}
                                                        ]
                                                    }
                                                }
                                            ]
                                        };
                                        dom_land.setOption(land_op);
                                    }
                                }
                        );

                    } else {
                        $('#land').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }
                    if (data.ldwt) {
                        require(
                                [
                                    'echarts',
                                    'echarts/chart/line',// 使用柱状图就加载bar模块，按需加载
                                    'echarts/chart/bar'
                                ],
                                function (ec) {
                                    var ldwt = data.ldwt;
                                    if (ldwt.length != 0) {
                                        var dom_ldwt = ec.init(document.getElementById('ldwt'));
                                        var ldwttime = [];
                                        var ldwtnum1 = [];
                                        var ldwtnum2 = [];
                                        var ldwtnum3 = [];

                                        for (var val in ldwt) {
                                            ldwttime.push(ldwt[val]['time']);
                                            ldwtnum1.push(parseInt(ldwt[val]['sh_u']));
                                            ldwtnum2.push(parseInt(ldwt[val]['sh_m']));
                                            ldwtnum3.push(parseInt(ldwt[val]['sh_d']));
                                        }

                                        ldwt_op = {
                                            title: {
                                                textStyle: {
                                                    fontSize: 14,
                                                    fontWeight: 'bolder',
                                                    color: '#333'          // 主标题文字颜色
                                                },
                                                x: 'left',

                                                text: data.sdate + '土壤湿度',
                                                subtext: '实时数据'
                                            },
                                            tooltip: {
                                                trigger: 'axis'
                                            },
                                            legend: {
                                                orient: 'vertical',
                                                x:'right',
                                                data:['0cm湿度','-10cm湿度','-20cm湿度']
                                            },
                                            toolbox: {
                                                show: true,
                                                feature: {
//                                                    mark: {show: true},
//                                                    dataView: {show: true, readOnly: false},
//                                                    magicType: {show: true, type: ['line', 'bar']},
//                                                    restore: {show: true},
//                                                    saveAsImage: {show: true}
                                                }
                                            },
                                            calculable: false,
                                            xAxis: [
                                                {
                                                    type: 'category',
                                                    boundaryGap: false,
                                                    data: ldwttime
                                                }
                                            ],
                                            yAxis: [
                                                {
                                                    type: 'value',
                                                    axisLabel: {
                                                        formatter: '{value}'
                                                    }
                                                }
                                            ],
                                            series: [
                                                {
                                                    name: '0cm湿度',
                                                    type: 'line',
                                                    data: ldwtnum1,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    }
//                                                    markLine: {
//                                                        data: [
//                                                            {type: 'average', name: '平均值'}
//                                                        ]
//                                                    }
                                                },
                                                {
                                                    name: '-10cm湿度',
                                                    type: 'line',
                                                    data: ldwtnum2,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    }
//                                                    markLine: {
//                                                        data: [
//                                                            {type: 'average', name: '平均值'}
//                                                        ]
//                                                    }
                                                },
                                                {
                                                    name: '-20cm湿度',
                                                    type: 'line',
                                                    data: ldwtnum3,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    }
//                                                    markLine: {
//                                                        data: [
//                                                            {type: 'average', name: '平均值'}
//                                                        ]
//                                                    }
                                                }
                                            ]
                                        };
                                        dom_ldwt.setOption(ldwt_op);
                                    }
                                }
                        );

                    } else {
                        $('#ldwt').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }
                    if (data.sun) {
                        require(
                                [
                                    'echarts',
                                    'echarts/chart/line',// 使用柱状图就加载bar模块，按需加载
                                    'echarts/chart/bar'
                                ],
                                function (ec) {
                                    var sun = data.sun;
                                    if (sun.length != 0) {
                                        var dom_sun = ec.init(document.getElementById('sun'));
                                        var suntime = [];
                                        var sunnum1 = [];
                                        var sunnum2 = [];

                                        for (var val in sun) {
                                            suntime.push(sun[val]['time']);
                                            sunnum1.push(parseInt(sun[val]['r_u']));
                                            sunnum2.push(parseInt(sun[val]['par_u']));
                                        }

                                        sun_op = {
                                            title: {
                                                textStyle: {
                                                    fontSize: 14,
                                                    fontWeight: 'bolder',
                                                    color: '#333'          // 主标题文字颜色
                                                },
                                                x: 'left',
                                                text: data.sdate + '太阳辐射',
                                                subtext: '实时数据'
                                            },
                                            tooltip: {
                                                trigger: 'axis'
                                            },
                                            legend: {
                                                orient: 'vertical',
                                                x:'right',
                                                data:['150cm辐射', '有效辐射']
                                            },
                                            toolbox: {
                                                show: true,
                                                feature: {
//                                                    mark: {show: true},
//                                                    dataView: {show: true, readOnly: false},
//                                                    magicType: {show: true, type: ['line', 'bar']},
//                                                    restore: {show: true},
//                                                    saveAsImage: {show: true}
                                                }
                                            },
                                            calculable: false,
                                            xAxis: [
                                                {
                                                    type: 'category',
                                                    boundaryGap: false,
                                                    data: suntime
                                                }
                                            ],
                                            yAxis: [
                                                {
                                                    type: 'value',
                                                    axisLabel: {
                                                        formatter: '{value}'
                                                    }
                                                }
                                            ],
                                            series: [
                                                {
                                                    name: '150cm辐射',
                                                    type: 'line',
                                                    data: sunnum1,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    },
                                                    markLine: {
                                                        data: [
                                                            {type: 'average', name: '平均值'}
                                                        ]
                                                    }
                                                },
                                                {
                                                    name: '有效辐射',
                                                    type: 'line',
                                                    data: sunnum2,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    },
                                                    markLine: {
                                                        data: [
                                                            {type: 'average', name: '平均值'}
                                                        ]
                                                    }
                                                }
                                            ]
                                        };
                                        dom_sun.setOption(sun_op);
                                    }
                                }
                        );

                    } else {
                        $('#sun').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }

                    if (data.co2) {
                        require(
                                [
                                    'echarts',
                                    'echarts/chart/line',// 使用柱状图就加载bar模块，按需加载
                                    'echarts/chart/bar'
                                ],
                                function (ec) {
                                    var co2 = data.co2;
                                    if (co2.length != 0) {
                                        var dom_co2 = ec.init(document.getElementById('co2'));
                                        var co2time = [];
                                        var co2num = [];
                                        for (var val in co2) {
                                            co2time.push(co2[val]['time']);
                                            co2num.push(parseInt(co2[val]['co2_u']));
                                        }
                                        co2_op = {
                                            title: {
                                                textStyle: {
                                                    fontSize: 14,
                                                    fontWeight: 'bolder',
                                                    color: '#333'          // 主标题文字颜色
                                                },
                                                x: 'left',

                                                text: data.sdate + '二氧化碳浓度',
                                                subtext: '实时数据'
                                            },
                                            tooltip: {
                                                trigger: 'axis'
                                            },
                                            legend: {
                                                orient: 'vertical',
                                                x:'right',
                                                data:['co2浓度']
                                            },
                                            toolbox: {
                                                show: true,
                                                feature: {
//                                                    mark: {show: true},
//                                                    dataView: {show: true, readOnly: false},
//                                                    magicType: {show: true, type: ['line', 'bar']},
//                                                    restore: {show: true},
//                                                    saveAsImage: {show: true}
                                                }
                                            },
                                            calculable: false,
                                            xAxis: [
                                                {
                                                    type: 'category',
                                                    boundaryGap: false,
                                                    data: co2time
                                                }
                                            ],
                                            yAxis: [
                                                {
                                                    type: 'value',
                                                    axisLabel: {
                                                        formatter: '{value}'
                                                    }
                                                }
                                            ],
                                            series: [
                                                {
                                                    name: 'co2浓度',
                                                    type: 'line',
                                                    data: co2num,
                                                    markPoint: {
                                                        data: [
                                                            {type: 'max', name: '最大值'},
                                                            {type: 'min', name: '最小值'}
                                                        ]
                                                    },
                                                    markLine: {
                                                        data: [
                                                            {type: 'average', name: '平均值'}
                                                        ]
                                                    }
                                                }

                                            ]
                                        };
                                        dom_co2.setOption(co2_op);
                                    }
                                }
                        );

                    } else {
                        $('#co2').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    }


                } else {
                    $('#tempreture').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    $('#air').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    $('#land').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    $('#ldwt').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    $('#sun').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
                    $('#co2').html('<div class="alert alert-info" role="alert">没有此站点数据</div>');
//                    window.location.href = '/';
                }
            }
        });
    </script>
    <script>
        $("#Validform_msg").remove();
    </script>
</block>
